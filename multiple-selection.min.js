/*! angular-multiple-selection 0.0.3 */
!function(){function a(b){for(var c=[],d=b.children(),e=0;e<d.length;e++){var f=angular.element(d[e]);f.scope().isSelectable?c.push(f):f.scope().$id!=b.scope().$id&&f.scope().isSelectableZone===!0||(c=c.concat(a(f)))}return c}function b(a){var b,c={top:0,left:0},d=a&&a.ownerDocument;return b=d.documentElement,void 0!==typeof a.getBoundingClientRect&&(c=a.getBoundingClientRect()),{top:c.top+(window.pageYOffset||b.scrollTop)-(b.clientTop||0),left:c.left+(window.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}}angular.module("multipleSelection",[]).directive("multipleSelectionItem",[function(){return{scope:!0,restrict:"A",link:function(b,c,d,e){b.isSelectable=!0,b.isSelecting=!1,b.isSelected=!1,c.on("mousedown",function(b){if(c.scope().isSelected)b.shiftKey&&(c.scope().isSelected=!1,c.scope().$apply());else{if(!b.shiftKey)for(var d=a(c.parent()),e=0;e<d.length;e++)d[e].scope().isSelectable&&(d[e].scope().isSelecting!==!0&&d[e].scope().isSelected!==!0||(d[e].scope().isSelecting=!1,d[e].scope().isSelected=!1,d[e].scope().$apply()));c.scope().isSelected=!0,c.scope().$apply()}b.stopPropagation()})}}}]).directive("multipleSelectionZone",["$document",function(c){return{scope:!0,restrict:"A",link:function(d,e,f,g){function h(a,b){return(b.beginX<=a.beginX&&a.beginX<=b.endX||a.beginX<=b.beginX&&b.beginX<=a.endX)&&(b.beginY<=a.beginY&&a.beginY<=b.endY||a.beginY<=b.beginY&&b.beginY<=a.endY)}function i(a,b,c,d){var e={};return a>c?(e.beginX=c,e.endX=a):(e.beginX=a,e.endX=c),b>d?(e.beginY=d,e.endY=b):(e.beginY=b,e.endY=d),e}function j(a,b,c,d,e){var f=i(b,c,d,e);m.css({top:f.beginY+"px",left:f.beginX+"px",width:f.endX-f.beginX+"px",height:f.endY-f.beginY+"px"})}function k(c){c.preventDefault(),j(m,n,o,c.pageX,c.pageY);for(var d=a(e),f=0;f<d.length;f++)h(i(b(d[f][0]).left,b(d[f][0]).top,b(d[f][0]).left+d[f].prop("offsetWidth"),b(d[f][0]).top+d[f].prop("offsetHeight")),i(n,o,c.pageX,c.pageY))?d[f].scope().isSelecting===!1&&(d[f].scope().isSelecting=!0,d[f].scope().$apply()):d[f].scope().isSelecting===!0&&(d[f].scope().isSelecting=!1,d[f].scope().$apply())}function l(b){b.preventDefault(),m.remove();for(var d=a(e),f=0;f<d.length;f++)d[f].scope().isSelecting===!0?(d[f].scope().isSelecting=!1,d[f].scope().isSelected=b.shiftKey?!d[f].scope().isSelected:!0,d[f].scope().$apply()):h(i(d[f].prop("offsetLeft"),d[f].prop("offsetTop"),d[f].prop("offsetLeft")+d[f].prop("offsetWidth"),d[f].prop("offsetTop")+d[f].prop("offsetHeight")),i(b.pageX,b.pageY,b.pageX,b.pageY))&&d[f].scope().isSelected===!1&&(d[f].scope().isSelected=!0,d[f].scope().$apply());c.off("mousemove",k),c.off("mouseup",l)}d.isSelectableZone=!0;var m,n=0,o=0;e.on("mousedown",function(b){if(b.preventDefault(),!b.shiftKey)for(var d=a(e),f=0;f<d.length;f++)d[f].scope().isSelecting!==!0&&d[f].scope().isSelected!==!0||(d[f].scope().isSelecting=!1,d[f].scope().isSelected=!1,d[f].scope().$apply());n=b.pageX,o=b.pageY,m=angular.element("<div></div>").addClass("select-helper"),c.find("body").eq(0).append(m),c.on("mousemove",k),c.on("mouseup",l)})}}}])}();